# ุฑุงูููุง ุชุณุช ู ุจุฑุฑุณ ุฏุงุฏูโูุง OHLCV

ุงู ุฑุงูููุง ูุญูู ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุชโูุง ุชุณุช ุจุฑุง ุจุฑุฑุณ ุตุญุช ุฏุงุฏูโูุง OHLCV ุงุฒ APIูุง ูุฎุชูู ุฑุง ุชูุถุญ ูโุฏูุฏ.

## ๐ ุดุฑูุน ุณุฑุน

### ุชุณุช ฺฉุงูู (ุชูุตู ูโุดูุฏ)

```bash
npm run test:ohlcv
```

ุงู ุฏุณุชูุฑ:
- ุชูุงู APIูุง ูพฺฉุฑุจูุฏ ุดุฏู ุฑุง ุชุณุช ูโฺฉูุฏ
- ุฏุงุฏูโูุง ุฑุง ุงุนุชุจุงุฑุณูุฌ ูโฺฉูุฏ
- ฺฏุฒุงุฑุด ุฌุงูุน JSON ุชููุฏ ูโฺฉูุฏ
- ูุชุงุฌ ุฑุง ุฏุฑ ฺฉูุณูู ููุงุด ูโุฏูุฏ

### ุชุณุช ุณุงุฏู (ุจุฑุง ุจุฑุฑุณ ุณุฑุน)

```bash
npm run test:ohlcv:simple
```

ุงู ุฏุณุชูุฑ:
- ุชุณุชโูุง ุณุฑุน ุฑู endpointูุง ุงุตู ุงูุฌุงู ูโุฏูุฏ
- ุฎุฑูุฌ ุฎูุงุตูโุชุฑ ุฏุงุฑุฏ
- ุจุฑุง ุจุฑุฑุณ ุงููู ููุงุณุจ ุงุณุช

## ๐ ูพุดโูุงุฒูุง

1. **ุณุฑูุฑ ุจุงุฏ ุฏุฑ ุญุงู ุงุฌุฑุง ุจุงุดุฏ**:
   ```bash
   npm run dev:server
   # ุง
   npm run start:server
   ```

2. **ุจุฑุฑุณ ุณูุงูุช ุณุฑูุฑ**:
   ```bash
   curl http://localhost:8000/api/health
   ```

## ๐ APIูุง ุชุณุช ุดุฏู

### 1. CoinGecko
- **Endpoint**: `/api/proxy/coingecko/coins/bitcoin/ohlc`
- **ุฏุงุฏู ููุฑุฏ ุงูุชุธุงุฑ**: 30 ุฑูุฒ ุฏุงุฏู ุฑูุฒุงูู
- **ูุฑูุช**: `[timestamp, open, high, low, close]`

### 2. Binance
- **Endpoint**: `/api/proxy/binance/klines`
- **ุฏุงุฏู ููุฑุฏ ุงูุชุธุงุฑ**: 365 ุฑูุฒ ุฏุงุฏู ุฑูุฒุงูู
- **ูุฑูุช**: `[openTime, open, high, low, close, volume, ...]`

### 3. CryptoCompare
- **Endpoint**: `/api/market/cryptocompare-prices`
- **ุฏุงุฏู ููุฑุฏ ุงูุชุธุงุฑ**: 200 ุฑูุฒ ุฏุงุฏู ุชุงุฑุฎ
- **ูุฑูุช**: `{time, open, high, low, close, volumefrom, volumeto}`

### 4. CoinMarketCap
- **Endpoint**: `/api/market/coinmarketcap-prices`
- **ูฺฉุชู**: ูุณุฎู ุฑุงฺฏุงู ููฺฉู ุงุณุช ุฏุงุฏู ุชุงุฑุฎ OHLCV ูุฏุงุดุชู ุจุงุดุฏ

### 5. KuCoin
- **Endpoint**: `/api/market/ohlcv`
- **ุฏุงุฏู ููุฑุฏ ุงูุชุธุงุฑ**: 200 ุฑูุฒ ุฏุงุฏู ุฑูุฒุงูู
- **ูุงุฒ ุจู**: API credentials (ุงุฎุชุงุฑ)

## ๐ ุจุฑุฑุณโูุง ุงูุฌุงู ุดุฏู

ุจุฑุง ูุฑ APIุ ุงุณฺฉุฑูพุช ููุงุฑุฏ ุฒุฑ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ:

โ **ฺฉุงูู ุจูุฏู ุฏุงุฏูโูุง**
- ุชุนุฏุงุฏ ุฏุงุฏูโูุง ุฏุฑุงูุช ุดุฏู ุจุง ููุฏุงุฑ ููุฑุฏ ุงูุชุธุงุฑ ูุทุงุจูุช ุฏุงุฑุฏ
- ูฺ ุฏุงุฏูโุง ุงุฒ ุฏุณุช ูุฑูุชู ุงุณุช

โ **ุงุนุชุจุงุฑ ุฏุงุฏูโูุง**
- ูฺ ููุฏุงุฑ null ุง undefined ูุฌูุฏ ูุฏุงุฑุฏ
- ุฑูุงุจุท ููุช ุตุญุญ ุงุณุช (high >= low, high >= open, etc.)
- ุญุฌู ูุนุงููุงุช ูุซุจุช ุงุณุช

โ **ุณุงุฒฺฏุงุฑ ุฏุงุฏูโูุง**
- ุชุงูโุงุณุชููพโูุง ูุชูุงู ูุณุชูุฏ
- ูฺ ูุงุตูู ุฒูุงู ุจุฒุฑฺฏ ูุฌูุฏ ูุฏุงุฑุฏ
- ุฏุงุฏูโูุง ูุฑุชุจ ูุณุชูุฏ

โ **ุฏูุช ุฏุงุฏูโูุง**
- ููุชโูุง ููุทู ูุณุชูุฏ
- ุญุฌู ูุนุงููุงุช ูุนุชุจุฑ ุงุณุช
- ุฏุงุฏูโูุง ุจูโุฑูุฒ ูุณุชูุฏ

## ๐ ุฎุฑูุฌ

### ฺฏุฒุงุฑุด JSON

ฺฏุฒุงุฑุด ฺฉุงูู ุฏุฑ ูุงู JSON ุฐุฎุฑู ูโุดูุฏ:
```
cursor_reports/ohlcv-verification-{timestamp}.json
```

### ุณุงุฎุชุงุฑ ฺฏุฒุงุฑุด

```json
{
  "timestamp": "2025-01-27T00:00:00.000Z",
  "totalApis": 5,
  "successfulApis": 4,
  "failedApis": 1,
  "results": [
    {
      "api": "CoinGecko",
      "success": true,
      "dataPoints": 30,
      "expectedDataPoints": 30,
      "missingDataPoints": 0,
      "errors": [],
      "warnings": [],
      "responseTime": 1234,
      "dataQuality": {
        "hasNulls": false,
        "hasGaps": false,
        "priceConsistency": true,
        "volumeConsistency": true
      },
      "sampleData": [...]
    }
  ],
  "summary": {
    "bestPerformer": "CoinGecko",
    "worstPerformer": "API_NAME",
    "averageResponseTime": 1500,
    "totalDataPoints": 795
  }
}
```

## ๐๏ธ ุงุณุชูุงุฏู ูพุดุฑูุชู

### ุชุณุช ุจุง URL ุณูุงุฑุด

```bash
API_BASE_URL=http://localhost:8000 npm run test:ohlcv
```

### ุชุณุช ูุณุชูู APIูุง (ุจุฏูู proxy)

ุงฺฏุฑ ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุชุ ูโุชูุงูุฏ ูุณุชููุงู APIูุง ุฑุง ุชุณุช ฺฉูุฏ:

```bash
# CoinGecko
curl "https://api.coingecko.com/api/v3/coins/bitcoin/ohlc?vs_currency=usd&days=30"

# Binance
curl "https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=1d&limit=365"

# CryptoCompare
curl "https://min-api.cryptocompare.com/data/v2/histoday?fsym=BTC&tsym=USD&limit=200"
```

### ุงุณุชูุงุฏู ุฏุฑ CI/CD

ูโุชูุงูุฏ ุงู ุชุณุช ุฑุง ุฏุฑ pipeline ุฎูุฏ ุงุถุงูู ฺฉูุฏ:

```yaml
# .github/workflows/test.yml
- name: Test OHLCV Data
  run: npm run test:ohlcv
```

## ๐ง ุนุจโุงุจ

### ูุดฺฉู: ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุช

```bash
# ุจุฑุฑุณ ูุถุนุช
curl http://localhost:8000/api/health

# ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ
npm run dev:server
```

### ูุดฺฉู: API key ูุงูุนุชุจุฑ

```bash
# ุจุฑุฑุณ ุชูุธูุงุช
cat config/api.json
cat config/providers_config.json

# ุงุนุชุจุงุฑุณูุฌ API keys
node scripts/validate-data-sources.js
```

### ูุดฺฉู: timeout ุง ุฎุทุง ุดุจฺฉู

```bash
# ุชุณุช ุงุชุตุงู ุจู APIูุง ุฎุงุฑุฌ
curl -I https://api.coingecko.com/api/v3/ping
curl -I https://api.binance.com/api/v3/ping

# ุจุฑุฑุณ proxy settings
echo $HTTP_PROXY
echo $HTTPS_PROXY
```

### ูุดฺฉู: ุฏุงุฏู ูุงูุต

- ุจุฑุฑุณ rate limits API
- ุจุฑุฑุณ ูุงฺฏโูุง ุณุฑูุฑ
- ุชุณุช ูุณุชูู endpoint ุจุง curl

## ๐ ุชูุณุฑ ูุชุงุฌ

### โ ูููู (Success)
- `success: true`
- `dataPoints >= expectedDataPoints * 0.95` (ุญุฏุงูู 95% ุฏุงุฏู)
- `errors.length === 0`
- `dataQuality` ููู true

### โ๏ธ ูุดุฏุงุฑ (Warning)
- `success: true` ุงูุง `warnings.length > 0`
- `missingDataPoints > 0` ุงูุง ฺฉูุชุฑ ุงุฒ 10%
- ูุดฺฉูุงุช ุฌุฒุฆ ุฏุฑ ฺฉูุช ุฏุงุฏู

### โ ูุงูููู (Failed)
- `success: false`
- `errors.length > 0`
- `dataPoints < expectedDataPoints * 0.5`
- ูุดฺฉูุงุช ุฌุฏ ุฏุฑ ฺฉูุช ุฏุงุฏู

## ๐ฏ ูุนุงุฑูุง ููููุช

ุชุณุช ูููู ุงุณุช ุงฺฏุฑ:
- โ ุญุฏุงูู 3 ุงุฒ 5 API ูููู ุจุงุดูุฏ
- โ CoinGecko ู Binance ุญุชูุงู ูููู ุจุงุดูุฏ
- โ ูุงูฺฏู response time ฺฉูุชุฑ ุงุฒ 5 ุซุงูู ุจุงุดุฏ
- โ ูฺ ุฎุทุง ุจุญุฑุงู ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ
- โ ุญุฏุงูู 80% ุฏุงุฏูโูุง ููุฑุฏ ุงูุชุธุงุฑ ุฏุฑุงูุช ุดูุฏ

## ๐ ุงุณุชูุงุฏู ุฏุฑ Cursor

ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ Cursor:

1. ูุงู `CURSOR_PROMPT_OHLCV_VERIFICATION.md` ุฑุง ุจุงุฒ ฺฉูุฏ
2. ูุญุชูุง ุขู ุฑุง ุจู Cursor ุจุฏูุฏ
3. ุงุฒ Cursor ุจุฎูุงูุฏ ุชุณุช ุฑุง ุงุฌุฑุง ฺฉูุฏ:
   ```
   Please run the OHLCV verification test: npm run test:ohlcv
   ```

ุง ูุณุชููุงู ุฏุณุชูุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```bash
npm run test:ohlcv
```

## ๐ ุชุณุช ููุธู

ุชูุตู ูโุดูุฏ ุงู ุชุณุช ุฑุง ุจู ุตูุฑุช ููุธู ุงุฌุฑุง ฺฉูุฏ:

- **ุฑูุฒุงูู**: ุจุฑุง ุจุฑุฑุณ ุณูุงูุช APIูุง
- **ูุจู ุงุฒ deploy**: ุจุฑุง ุงุทููุงู ุงุฒ ุตุญุช ุฏุงุฏูโูุง
- **ุจุนุฏ ุงุฒ ุชุบุฑุงุช**: ุจุฑุง ุงุทููุงู ุงุฒ ุนุฏู ุดฺฉุณุชู ฺุฒ

ูโุชูุงูุฏ ฺฉ cron job ุงุถุงูู ฺฉูุฏ:

```bash
# ูุฑ ุฑูุฒ ุณุงุนุช 2 ุตุจุญ
0 2 * * * cd /path/to/project && npm run test:ohlcv >> logs/ohlcv-test.log 2>&1
```

## ๐ ููุงุจุน ุจุดุชุฑ

- [ฺฏุฒุงุฑุด ุชุญูู ุฏุงุฏูโูุง](./DATA_RETRIEVAL_ANALYSIS_REPORT.json)
- [ุฑุงูููุง ุชุณุช ุฏุงุฏูโูุง](./README_DATA_RETRIEVAL.md)
- [ูพุฑุงููพุช Cursor](./CURSOR_PROMPT_OHLCV_VERIFICATION.md)

## ๐ก ูฺฉุงุช

1. **Rate Limiting**: ุจุฑุฎ APIูุง ูุญุฏูุฏุช ุฏุฑุฎูุงุณุช ุฏุงุฑูุฏุ ุจู ุชุณุชโูุง ูุงุตูู ุจฺฏุฐุงุฑุฏ
2. **API Keys**: ุจุฑุง APIูุง premiumุ ฺฉูุฏูุง ูุนุชุจุฑ ูุงุฒู ุงุณุช
3. **Network**: ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู ุฏุณุชุฑุณ ุจู ุงูุชุฑูุช ุฏุงุฑุฏ
4. **Cache**: ุงฺฏุฑ ุฏุงุฏูโูุง ูุฏู ูโุจูุฏุ cache ุฑุง ูพุงฺฉ ฺฉูุฏ

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ูพุด ุขูุฏ:
1. ูุงฺฏโูุง ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ฺฏุฒุงุฑุด JSON ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ุชุณุชโูุง ุฏุณุช ุจุง curl ุงูุฌุงู ุฏูุฏ
4. ุชูุธูุงุช API ุฑุง ุจุฑุฑุณ ฺฉูุฏ

---

**ูฺฉุชู**: ุงู ุชุณุชโูุง ุจุฑุง ุงุทููุงู ุงุฒ ุตุญุช ู ฺฉุงูู ุจูุฏู ุฏุงุฏูโูุง OHLCV ุทุฑุงุญ ุดุฏูโุงูุฏ. ุงุฌุฑุง ููุธู ุขูโูุง ุจู ุญูุธ ฺฉูุช ุฏุงุฏูโูุง ฺฉูฺฉ ูโฺฉูุฏ.
